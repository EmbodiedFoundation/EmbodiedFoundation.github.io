<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="description"
        content="H-RDT: Human Manipulation Enhanced Bimanual Robotic Manipulation">
  <meta name="keywords" content="H-RDT, Robot Learning, Imitation Learning, Diffusion Transformer">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>H-RDT: Human Manipulation Enhanced Bimanual Robotic Manipulation</title>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-PYVRSFMDRL"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }

    gtag('js', new Date());

    gtag('config', 'G-PYVRSFMDRL');
  </script>

  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro"
        rel="stylesheet">

  <link rel="stylesheet" href="./static/css/bulma.min.css">
  <link rel="stylesheet" href="./static/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="./static/css/bulma-slider.min.css">
  <link rel="stylesheet" href="./static/css/fontawesome.all.min.css">
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="./static/css/index.css">
  <link rel="icon" href="./favicon.ico">
  
  <!-- Video Carousel Styles -->
  <style>
    .video-carousel {
      position: relative;
      width: 100%;
      max-width: 800px;
      margin: 0 auto;
      overflow: hidden;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    
    .video-slides-container {
      display: flex;
      transition: transform 0.3s ease-in-out;
      width: 100%;
    }
    
    .video-slide {
      flex: 0 0 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .video-slide video {
      width: 100%;
      height: auto;
      max-width: 800px;
    }
    
    .carousel-controls {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0, 0, 0, 0.5);
      color: white;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      transition: background 0.3s ease;
    }
    
    .carousel-controls:hover {
      background: rgba(0, 0, 0, 0.7);
    }
    
    .carousel-prev {
      left: 10px;
    }
    
    .carousel-next {
      right: 10px;
    }
    
    .carousel-indicators {
      display: flex;
      justify-content: center;
      margin-top: 15px;
      gap: 8px;
    }
    
    .carousel-indicator {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #ddd;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    
    .carousel-indicator.active {
      background: #007bff;
    }
    

  </style>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script defer src="./static/js/fontawesome.all.min.js"></script>
  <script src="./static/js/bulma-carousel.min.js"></script>
  <script src="./static/js/bulma-slider.min.js"></script>
  <script src="./static/js/index.js"></script>
</head>
<body>

<nav class="navbar" role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>
  <div class="navbar-menu">
    <div class="navbar-start" style="flex-grow: 1; justify-content: center;">
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link">
          <span class="icon">
            <i class="fas fa-home"></i>
          </span>
        </a>
        <div class="navbar-dropdown">
          <a class="navbar-item" href="https://github.com/thu-ml/">
            TSAIL Group
          </a>
          <a class="navbar-item" href="https://embodiedfoundation.github.io/vidar_anypos">
            Vidar & AnyPos
          </a>
        </div>
      </div>
    </div>
  </div>
</nav>

<section class="hero">
  <div class="hero-body">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column has-text-centered">
          <h1 class="title is-1 publication-title">H-RDT: Human Manipulation Enhanced Bimanual Robotic Manipulation</h1>
          <div class="is-size-5 publication-authors">
            <span class="author-block">
                <a href="https://hongzhebi.github.io/">Hongzhe Bi</a><sup>1,2</sup>,
            </span>
            <span class="author-block">
                <a href="https://ethan-iai.github.io/">Lingxuan Wu</a><sup>1</sup>,
            </span>
            <span class="author-block">
                <a href="https://wzmsltw.github.io/">Tianwei Lin</a><sup>2</sup>,
            </span>
            <span class="author-block">
                <a href="https://stormy-cheese-458.notion.site/Hengkai-Tan-22a9b6e0b5bb801782edc3771ff3ba37">Hengkai Tan</a><sup>1</sup>,
            </span>
            <span class="author-block">
                <a href="https://scholar.google.com/citations?user=HQfc8TEAAAAJ&hl=en">ZhiZhong Su</a><sup>2</sup>,
            </span>
            <span class="author-block">
              <a href="https://scholar.google.com/citations?user=dxN1_X0AAAAJ&hl=zh-CN&oi=ao">Hang Su</a><sup>1</sup>,
            </span>
            <span class="author-block">
              <a href="https://ml.cs.tsinghua.edu.cn/~jun/index.shtml">Jun Zhu</a><sup>1</sup>
            </span>
          </div>

          <div class="is-size-5 publication-authors">
            <span class="author-block"><sup>1</sup>Tsinghua University</span><br>
            <span class="author-block"><sup>2</sup>Horizon Robotics</span><br>
          </div>

          <div class="column has-text-centered">
            <div class="publication-links">
              <!-- arXiv Link. -->
              <span class="link-block">
                <a href="#"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="ai ai-arxiv"></i>
                  </span>
                  <span>arXiv</span>
                </a>
              </span>
              <!-- Code Link. -->
              <span class="link-block">
                <a href="https://github.com/HongzheBi/H_RDT"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="fab fa-github"></i>
                  </span>
                  <span>Code</span>
                </a>
              </span>
              <span class="link-block">
                <a href="https://huggingface.co/embodiedfoundation/H-RDT"
                  class="external-link button is-normal is-rounded is-dark">
                  <span class="icon" style="font-size: 1.2em;">
                    🤗
                  </span>
                  <span>Model</span>
                </a>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="section">
  <div class="container is-max-desktop">
    <div class="columns is-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3 has-text-centered">Overview</h2>
        
        <div class="has-text-centered my-5">
          <figure class="image">
            <img src="./assets/hrdt/figure1.jpg" alt="H-RDT Overview" style="max-width: 120%; height: auto; display: block; margin: 0 auto;">
          </figure>
          <p class="has-text-grey is-size-6">Figure 1: Overview of H-RDT. A human-to-robotics diffusion transformer with two-stage training.</p>
        </div>
        <div class="content has-text-justified">
          <ul>
            <li>
              Imitation learning for robotic manipulation faces a fundamental challenge: <strong>the scarcity of large-scale, high-quality robot demonstration data</strong>. Recent robotic foundation models often pre-train on cross-embodiment robot datasets to increase data scale, while they face significant limitations as the diverse morphologies and action spaces across different robot embodiments make unified training challenging.
            </li>
            <li>
              We present <strong>H-RDT (Human to Robotics Diffusion Transformer)</strong>, a novel approach that leverages human manipulation data to enhance robot manipulation capabilities. Our key insight is that <strong>large-scale egocentric human manipulation videos with paired 3D hand pose annotations provide rich behavioral priors</strong> that capture natural manipulation strategies and can benefit robotic policy learning.
            </li>
            <li>
              We introduce a <strong>two-stage training paradigm</strong>: (1) pre-training on large-scale egocentric human manipulation data, and (2) cross-embodiment fine-tuning on robot-specific data with modular action encoders and decoders. Built on a diffusion transformer architecture with <strong>2B parameters</strong>, H-RDT uses <strong>flow matching</strong> to model complex action distributions.
            </li>
            <li>
              Extensive evaluations encompassing both simulation and real-world experiments, single-task and multitask scenarios, as well as few-shot learning and robustness assessments, demonstrate that H-RDT outperforms training from scratch and existing state-of-the-art methods, including <strong>π₀ and RDT</strong>, achieving significant improvements of <strong>13.9%</strong> and <strong>40.5%</strong> over training from scratch in simulation and real-world experiments, respectively.
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- H-RDT: Human to Robotics Diffusion Transformer -->
<section class="section">
  <div class="container is-max-desktop">
    <div class="columns is-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3 has-text-centered">H-RDT: Human to Robotics Diffusion Transformer</h2>
        
        <!-- Architecture Overview -->
        <div class="has-text-centered my-5">
          <figure class="image">
            <img src="./assets/hrdt/figure2.png" alt="H-RDT Architecture" style="max-width: 100%; height: auto; display: block; margin: 0 auto;">
          </figure>
          <p class="has-text-grey is-size-6">Figure 2: H-RDT framework.</p>
        </div>
        
        <div class="content has-text-justified">
          <h3 class="title is-4 has-text-centered">Key Techniques</h3>
          
          <ul>
            <li>
              <strong>Human Action Representation Design:</strong> H-RDT uses a unified 48-dimensional action space capturing bilateral wrist poses (position + 6D rotation) and fingertip positions for all 5 fingers on both hands, totaling 48 dimensions of essential bimanual dexterous manipulation patterns.
            </li>
            <li>
              <strong>Two-Stage Training Paradigm:</strong> Our approach consists of two main stages: (1) pre-training on large-scale human manipulation data with 48-dimensional hand pose representations using the complete EgoDex dataset (338K+ trajectories, 194 manipulation tasks, 829 hours), and (2) cross-embodiment fine-tuning with modular action encoders and decoders adapted to specific robot action spaces.
            </li>
            <li>
              <strong>Diffusion Transformer Architecture:</strong> Built on a diffusion transformer with 2B parameters, H-RDT uses flow matching to model complex action distributions and achieve robust manipulation capabilities.
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- H-RDT Inference Video Samples -->
<section class="section">
  <div class="container is-max-desktop">
    <div class="columns is-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3 has-text-centered">H-RDT Inference Video Samples</h2>
        
        <!-- Towel Folding -->
        <div class="content has-text-justified">
          <h3 class="title is-4 has-text-centered" style="margin-top: 3rem;">Towel Folding</h3>
          
          <!-- Video Comparison Row -->
          <div class="columns is-centered" style="margin-top: 2rem;">
            <!-- H-RDT Videos -->
            <div class="column is-5">
              <div class="has-text-centered" style="margin-bottom: 1rem;">
                <h4 class="title is-5">H-RDT</h4>
              </div>
              <div class="video-carousel" id="fold-towel-hrdt-carousel">
                <div class="video-slides-container">
                  <div class="video-slide">
                    <video controls style="width: 100%; max-width: 1200px; height: auto;">
                      <source src="./assets/hrdt/videos/fold_towel/hrdt/1.mp4" type="video/mp4">
                      Your browser does not support the video tag.
                    </video>
                  </div>
                  <div class="video-slide">
                    <video controls style="width: 100%; max-width: 1200px; height: auto;">
                      <source src="./assets/hrdt/videos/fold_towel/hrdt/2.mp4" type="video/mp4">
                      Your browser does not support the video tag.
                    </video>
                  </div>
                  <div class="video-slide">
                    <video controls style="width: 100%; max-width: 1200px; height: auto;">
                      <source src="./assets/hrdt/videos/fold_towel/hrdt/4.mp4" type="video/mp4">
                      Your browser does not support the video tag.
                    </video>
                  </div>
                  <div class="video-slide">
                    <video controls style="width: 100%; max-width: 1200px; height: auto;">
                      <source src="./assets/hrdt/videos/fold_towel/hrdt/5.mp4" type="video/mp4">
                      Your browser does not support the video tag.
                    </video>
                  </div>
                </div>
                <button class="carousel-controls carousel-prev" onclick="changeSlide('fold-towel-hrdt-carousel', -1)">
                  <i class="fas fa-chevron-left"></i>
                </button>
                <button class="carousel-controls carousel-next" onclick="changeSlide('fold-towel-hrdt-carousel', 1)">
                  <i class="fas fa-chevron-right"></i>
                </button>
                <div class="carousel-indicators">
                  <span class="carousel-indicator active" onclick="goToSlide('fold-towel-hrdt-carousel', 0)"></span>
                  <span class="carousel-indicator" onclick="goToSlide('fold-towel-hrdt-carousel', 1)"></span>
                  <span class="carousel-indicator" onclick="goToSlide('fold-towel-hrdt-carousel', 2)"></span>
                  <span class="carousel-indicator" onclick="goToSlide('fold-towel-hrdt-carousel', 3)"></span>
                </div>
              </div>
            </div>
            
            <!-- H-RDT w/o Human Videos -->
            <div class="column is-5">
              <div class="has-text-centered" style="margin-bottom: 1rem;">
                <h4 class="title is-5">H-RDT w/o Human (Scratch)</h4>
              </div>
              <div class="video-carousel" id="fold-towel-scratch-carousel">
                <div class="video-slides-container">
                  <div class="video-slide">
                    <video controls style="width: 100%; max-width: 1200px; height: auto;">
                      <source src="./assets/hrdt/videos/fold_towel/scratch/3.mp4" type="video/mp4">
                      Your browser does not support the video tag.
                    </video>
                  </div>
                  <div class="video-slide">
                    <video controls style="width: 100%; max-width: 1200px; height: auto;">
                      <source src="./assets/hrdt/videos/fold_towel/scratch/6.mp4" type="video/mp4">
                      Your browser does not support the video tag.
                    </video>
                  </div>
                </div>
                <button class="carousel-controls carousel-prev" onclick="changeSlide('fold-towel-scratch-carousel', -1)">
                  <i class="fas fa-chevron-left"></i>
                </button>
                <button class="carousel-controls carousel-next" onclick="changeSlide('fold-towel-scratch-carousel', 1)">
                  <i class="fas fa-chevron-right"></i>
                </button>
                <div class="carousel-indicators">
                  <span class="carousel-indicator active" onclick="goToSlide('fold-towel-scratch-carousel', 0)"></span>
                  <span class="carousel-indicator" onclick="goToSlide('fold-towel-scratch-carousel', 1)"></span>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Task Description -->
          <p class="has-text-centered is-size-6 has-text-grey" style="margin-top: 2rem;">
            This task involves manipulating deformable towel with two sequential folds, where the first fold requires bimanual coordination to simultaneously grasp the towel's bottom edges.
          </p>
        </div>

        <!-- Cup to Coaster Placement -->
        <div class="content has-text-justified">
          <h3 class="title is-4 has-text-centered" style="margin-top: 3rem;">Cup to Coaster Placement</h3>
          
          <!-- Video Comparison Row -->
          <div class="columns is-centered" style="margin-top: 2rem;">
            <!-- H-RDT Videos -->
            <div class="column is-5">
              <div class="has-text-centered" style="margin-bottom: 1rem;">
                <h4 class="title is-5">H-RDT</h4>
              </div>
              <div class="video-carousel" id="cup-place-hrdt-carousel">
                <div class="video-slides-container">
                  <div class="video-slide">
                    <video controls style="width: 100%; max-width: 1200px; height: auto;">
                      <source src="./assets/hrdt/videos/cup_place/hrdt/3.mp4" type="video/mp4">
                      Your browser does not support the video tag.
                    </video>
                  </div>
                  <div class="video-slide">
                    <video controls style="width: 100%; max-width: 1200px; height: auto;">
                      <source src="./assets/hrdt/videos/cup_place/hrdt/4.mp4" type="video/mp4">
                      Your browser does not support the video tag.
                    </video>
                  </div>
                  <div class="video-slide">
                    <video controls style="width: 100%; max-width: 1200px; height: auto;">
                      <source src="./assets/hrdt/videos/cup_place/hrdt/5.mp4" type="video/mp4">
                      Your browser does not support the video tag.
                    </video>
                  </div>
                </div>
                <button class="carousel-controls carousel-prev" onclick="changeSlide('cup-place-hrdt-carousel', -1)">
                  <i class="fas fa-chevron-left"></i>
                </button>
                <button class="carousel-controls carousel-next" onclick="changeSlide('cup-place-hrdt-carousel', 1)">
                  <i class="fas fa-chevron-right"></i>
                </button>
                <div class="carousel-indicators">
                  <span class="carousel-indicator active" onclick="goToSlide('cup-place-hrdt-carousel', 0)"></span>
                  <span class="carousel-indicator" onclick="goToSlide('cup-place-hrdt-carousel', 1)"></span>
                  <span class="carousel-indicator" onclick="goToSlide('cup-place-hrdt-carousel', 2)"></span>
                </div>
              </div>
            </div>
            
            <!-- H-RDT w/o Human Videos -->
            <div class="column is-5">
              <div class="has-text-centered" style="margin-bottom: 1rem;">
                <h4 class="title is-5">H-RDT w/o Human (Scratch)</h4>
              </div>
              <div class="video-carousel" id="cup-place-scratch-carousel">
                <div class="video-slides-container">
                  <div class="video-slide">
                    <video controls style="width: 100%; max-width: 1200px; height: auto;">
                      <source src="./assets/hrdt/videos/cup_place/scratch/1.mp4" type="video/mp4">
                      Your browser does not support the video tag.
                    </video>
                  </div>
                  <div class="video-slide">
                    <video controls style="width: 100%; max-width: 1200px; height: auto;">
                      <source src="./assets/hrdt/videos/cup_place/scratch/2.mp4" type="video/mp4">
                      Your browser does not support the video tag.
                    </video>
                  </div>
                </div>
                <button class="carousel-controls carousel-prev" onclick="changeSlide('cup-place-scratch-carousel', -1)">
                  <i class="fas fa-chevron-left"></i>
                </button>
                <button class="carousel-controls carousel-next" onclick="changeSlide('cup-place-scratch-carousel', 1)">
                  <i class="fas fa-chevron-right"></i>
                </button>
                <div class="carousel-indicators">
                  <span class="carousel-indicator active" onclick="goToSlide('cup-place-scratch-carousel', 0)"></span>
                  <span class="carousel-indicator" onclick="goToSlide('cup-place-scratch-carousel', 1)"></span>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Task Description -->
          <p class="has-text-centered is-size-6 has-text-grey" style="margin-top: 2rem;">
            This task requires spatial reasoning to select the appropriate arm (left or right) based on the cup's position relative to the coaster.
          </p>
        </div>
        
        <!-- Other Demos -->
        <div class="content has-text-justified">
          <h3 class="title is-4 has-text-centered" style="margin-top: 4rem;">Other Demos</h3>
          
          <!-- Other Demos Row -->
          <div class="columns is-centered" style="margin-top: 2rem;">
            <!-- Water Pouring -->
            <div class="column is-3">
              <div class="has-text-centered">
                <video controls style="width: 100%; max-width: 300px; height: auto;">
                  <source src="./assets/hrdt/videos/water_pouring.mp4" type="video/mp4">
                  Your browser does not support the video tag.
                </video>
                <p class="has-text-centered is-size-6 has-text-grey-dark" style="margin-top: 1rem;">
                  <strong>Water Pouring</strong>
                </p>
              </div>
            </div>
            
            <!-- Plates Stacking -->
            <div class="column is-3">
              <div class="has-text-centered">
                <video controls style="width: 100%; max-width: 300px; height: auto;">
                  <source src="./assets/hrdt/videos/plates_stacking.mp4" type="video/mp4">
                  Your browser does not support the video tag.
                </video>
                <p class="has-text-centered is-size-6 has-text-grey-dark" style="margin-top: 1rem;">
                  <strong>Plates Stacking</strong>
                </p>
              </div>
            </div>
            
            <!-- Pen Capping -->
            <div class="column is-3">
              <div class="has-text-centered">
                <video controls style="width: 100%; max-width: 300px; height: auto;">
                  <source src="./assets/hrdt/videos/pen_capping.mp4" type="video/mp4">
                  Your browser does not support the video tag.
                </video>
                <p class="has-text-centered is-size-6 has-text-grey-dark" style="margin-top: 1rem;">
                  <strong>Pen Capping</strong>
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Video Information -->
        <div class="content has-text-justified" style="margin-top: 3rem;">
          <div class="has-text-centered">
            <p class="is-size-6 has-text-grey-dark">
              <strong>Note:</strong> More demos coming soon
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Real-world Task Definitions -->
<section class="section">
  <div class="container is-max-desktop">
    <div class="columns is-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3 has-text-centered">Real-world Task Definitions</h2>
        
        <div class="has-text-centered my-5">
          <figure class="image">
            <img src="./assets/hrdt/figure4.png" alt="Real-world Task Definitions" style="max-width: 120%; height: auto; display: block; margin: 0 auto;">
          </figure>
          <p class="has-text-grey is-size-6">Figure 4: Task definition of real-world experiments.</p>
        </div>
        
        <div class="content has-text-justified">
          <p>
            Our real-world experiments encompass diverse bimanual manipulation tasks across multiple robotic platforms:
          </p>
          <ul>
            <li><strong>Dual-Arm Piper</strong>: Towel folding and cup-to-coaster placement tasks requiring deformable object manipulation and spatial reasoning</li>
            <li><strong>Dual-Arm UR5</strong>: Takeout bag placement tasks with sequential bimanual coordination</li>
            <li><strong>Dual-Arm ARX5</strong>: Pick-and-place manipulation tasks including stacking bowls and object placement</li>
          </ul>
          <p>
            These tasks validate H-RDT's ability to handle complex real-world scenarios with varying degrees of dexterity and coordination requirements.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>





<!-- BibTeX Citation -->
<section class="section">
  <div class="container is-max-desktop">
    <div class="columns is-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">BibTeX</h2>
        <div class="content has-text-justified">
          <p>
            If you find our work helpful, please cite us:
          </p>
        </div>
        <pre><code>@misc{bi2025hrdt,
    title={H-RDT: Human Manipulation Enhanced Bimanual Robotic Manipulation}, 
    author={Hongzhe Bi and Lingxuan Wu and Tianwei Lin and Hengkai Tan and Zhizhong Su and Hang Su and Jun Zhu},
    year={2025},
    eprint={TBD},
    archivePrefix={arXiv},
    primaryClass={cs.RO},
    url={https://embodiedfoundation.github.io/hrdt}, 
}</code></pre>
        <div class="content has-text-justified">
          <p>
            Thank you!
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<footer class="footer">
  <div class="container">
    <div class="content has-text-centered">
      <a class="icon-link"
         href="#">
        <i class="fas fa-file-pdf"></i>
      </a>
      <a class="icon-link" href="#" class="external-link" disabled>
        <i class="fab fa-github"></i>
      </a>
    </div>
    <div class="columns is-centered">
      <div class="column is-8">
        <div class="content">
          <p>
            This website template is borrowed from <a href="https://github.com/nerfies/nerfies.github.io">Nerfies</a>.
          </p>
        </div>
      </div>
    </div>
  </div>
</footer>

<!-- Video Carousel JavaScript -->
<script>
// 存储每个轮播的当前位置
const carouselPositions = {
  'cup-place-hrdt-carousel': 0,
  'cup-place-scratch-carousel': 0,
  'fold-towel-hrdt-carousel': 0,
  'fold-towel-scratch-carousel': 0
};

// 获取轮播的幻灯片数量
function getSlideCount(carouselId) {
  const carousel = document.getElementById(carouselId);
  return carousel.querySelectorAll('.video-slide').length;
}

// 更新轮播显示
function updateCarousel(carouselId) {
  const carousel = document.getElementById(carouselId);
  const slidesContainer = carousel.querySelector('.video-slides-container');
  const indicators = carousel.querySelectorAll('.carousel-indicator');
  const currentPosition = carouselPositions[carouselId];
  
  // 移动幻灯片容器
  slidesContainer.style.transform = `translateX(-${currentPosition * 100}%)`;
  
  // 更新指示器
  indicators.forEach((indicator, index) => {
    indicator.classList.toggle('active', index === currentPosition);
  });
  
  // 暂停所有视频
  const videos = carousel.querySelectorAll('video');
  videos.forEach(video => {
    video.pause();
  });
}

// 切换幻灯片
function changeSlide(carouselId, direction) {
  const slideCount = getSlideCount(carouselId);
  const currentPosition = carouselPositions[carouselId];
  
  // 计算新位置
  let newPosition = currentPosition + direction;
  
  // 处理边界情况
  if (newPosition < 0) {
    newPosition = slideCount - 1;
  } else if (newPosition >= slideCount) {
    newPosition = 0;
  }
  
  carouselPositions[carouselId] = newPosition;
  updateCarousel(carouselId);
}

// 跳转到指定幻灯片
function goToSlide(carouselId, slideIndex) {
  carouselPositions[carouselId] = slideIndex;
  updateCarousel(carouselId);
}

// 页面加载完成后初始化轮播
document.addEventListener('DOMContentLoaded', function() {
  // 初始化所有轮播
  Object.keys(carouselPositions).forEach(carouselId => {
    updateCarousel(carouselId);
  });
  
  // 为所有视频添加点击播放/暂停功能
  const videos = document.querySelectorAll('.video-carousel video');
  videos.forEach(video => {
    video.addEventListener('click', function() {
      if (video.paused) {
        // 暂停其他正在播放的视频
        videos.forEach(otherVideo => {
          if (otherVideo !== video) {
            otherVideo.pause();
          }
        });
        video.play();
      } else {
        video.pause();
      }
    });
  });
});

// 键盘导航支持
document.addEventListener('keydown', function(e) {
  const focusedCarousel = document.querySelector('.video-carousel:hover');
  if (focusedCarousel) {
    const carouselId = focusedCarousel.id;
    if (e.key === 'ArrowLeft') {
      changeSlide(carouselId, -1);
      e.preventDefault();
    } else if (e.key === 'ArrowRight') {
      changeSlide(carouselId, 1);
      e.preventDefault();
    }
  }
});
</script>

</body>
</html> 